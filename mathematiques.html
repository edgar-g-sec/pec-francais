<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Plan d’étude cantonal — Mathématiques (version “web”)</title>
  <style>
    :root{
      --bg:#f6f7fb;
      --card:#ffffff;
      --border:#e6e8f0;
      --text:#111827;
      --muted:#6b7280;
      --blue:#2563eb;
      --blue-weak:#e8efff;
      --shadow:0 10px 30px rgba(17,24,39,.06);
      --radius:16px;
      --radius2:12px;
      --mono: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono","Courier New", monospace;
      --sans: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji","Segoe UI Emoji";
    }
    *{box-sizing:border-box}
    body{
      margin:0;
      font-family:var(--sans);
      color:var(--text);
      background:var(--bg);
      line-height:1.45;
    }
    a{color:var(--blue); text-decoration:none}
    a:hover{text-decoration:underline}
    .wrap{
      max-width:1200px;
      margin:24px auto;
      padding:0 16px 32px;
    }

    /* Header */
    .header{
      background:var(--card);
      border:1px solid var(--border);
      border-radius:var(--radius);
      padding:20px 20px 14px;
      box-shadow:var(--shadow);
    }
    .title{
      margin:0 0 4px;
      font-size:26px;
      letter-spacing:-0.02em;
    }
    .subtitle{
      margin:0 0 12px;
      color:var(--muted);
      font-size:14px;
    }

    /* Pills (comme capture) */
    .pills{
      display:flex;
      flex-wrap:wrap;
      gap:8px;
      padding:6px 0 0;
    }
    .pill{
      border:1px solid var(--border);
      background:#fff;
      color:#374151;
      padding:7px 10px;
      border-radius:999px;
      font-size:13px;
      cursor:pointer;
      user-select:none;
      transition:.15s transform, .15s background, .15s border-color;
    }
    .pill:hover{transform:translateY(-1px)}
    .pill.active{
      border-color:#cfe0ff;
      background:var(--blue-weak);
      color:#1d4ed8;
      font-weight:600;
    }

    /* Layout */
    .grid{
      display:grid;
      grid-template-columns: 320px 1fr;
      gap:16px;
      margin-top:16px;
      align-items:start;
    }
    @media (max-width: 980px){
      .grid{grid-template-columns:1fr}
    }
    .card{
      background:var(--card);
      border:1px solid var(--border);
      border-radius:var(--radius);
      box-shadow:var(--shadow);
    }

    /* Sidebar */
    .side{
      padding:14px;
      position:sticky;
      top:16px;
    }
    @media (max-width: 980px){
      .side{position:relative; top:auto}
    }
    .side h3{
      margin:6px 0 10px;
      font-size:14px;
      letter-spacing:.02em;
      text-transform:none;
    }
    .toc{
      margin:0;
      padding-left:16px;
      color:#1f2937;
      font-size:14px;
    }
    .toc li{margin:6px 0}
    .toc a{color:#1d4ed8}
    .toc small{color:var(--muted)}

    /* Main */
    .main{padding:14px}
    .section{
      border:1px solid var(--border);
      border-radius:var(--radius2);
      background:#fff;
      padding:14px;
      margin-bottom:12px;
    }
    .sectionHead{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:12px;
    }
    .sectionTitle{
      display:flex;
      align-items:center;
      gap:10px;
      font-weight:800;
      margin:0;
      font-size:20px;
      letter-spacing:-0.02em;
    }
    .mini{
      margin:8px 0 0;
      color:var(--muted);
      font-size:13px;
    }

    /* Accordions */
    details.accordion{
      border:1px solid var(--border);
      border-radius:12px;
      background:#fbfcff;
      margin-top:10px;
      overflow:hidden;
    }
    details.accordion > summary{
      list-style:none;
      cursor:pointer;
      padding:11px 12px;
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:10px;
      font-weight:700;
      user-select:none;
    }
    details.accordion > summary::-webkit-details-marker{display:none}
    .accBody{padding:0 12px 12px}
    .accBody p{margin:10px 0}
    .bullets{margin:8px 0 0; padding-left:18px}
    .bullets li{margin:6px 0}

    /* Chips for filters */
    .chips{
      display:flex;
      flex-wrap:wrap;
      gap:8px;
      margin-top:10px;
    }
    .chip{
      border:1px solid var(--border);
      background:#fff;
      border-radius:999px;
      padding:6px 10px;
      font-size:13px;
      cursor:pointer;
      user-select:none;
    }
    .chip.active{
      background:var(--blue-weak);
      border-color:#cfe0ff;
      color:#1d4ed8;
      font-weight:700;
    }

    /* Lists / items */
    .items{
      margin-top:10px;
      border-top:1px solid var(--border);
      padding-top:10px;
    }
    .item{
      padding:10px 10px;
      border:1px solid var(--border);
      border-radius:12px;
      margin:8px 0;
      background:#fff;
    }
    .itemTop{
      display:flex;
      align-items:flex-start;
      justify-content:space-between;
      gap:10px;
    }
    .itemTitle{
      margin:0;
      font-weight:700;
    }
    .badges{
      display:flex;
      flex-wrap:wrap;
      gap:6px;
      justify-content:flex-end;
      min-width:160px;
    }
    .badge{
      font-family:var(--mono);
      font-size:12px;
      padding:3px 7px;
      border-radius:999px;
      border:1px solid var(--border);
      background:#fff;
      color:#111827;
      white-space:nowrap;
    }

    .note{
      border-left:3px solid #c7d2fe;
      padding:8px 10px;
      margin:10px 0;
      background:#f5f7ff;
      color:#1f2937;
      border-radius:10px;
      font-size:13px;
    }
    .k{
      font-family:var(--mono);
      background:#f3f4f6;
      padding:2px 6px;
      border-radius:8px;
      border:1px solid #e5e7eb;
    }

    .searchRow{
      display:flex;
      gap:10px;
      margin-top:10px;
      flex-wrap:wrap;
      align-items:center;
    }
    input[type="search"]{
      flex:1;
      min-width:240px;
      border:1px solid var(--border);
      border-radius:12px;
      padding:10px 12px;
      font-size:14px;
      outline:none;
      background:#fff;
    }
    input[type="search"]:focus{
      border-color:#cfe0ff;
      box-shadow:0 0 0 4px rgba(37,99,235,.08);
    }
    .muted{color:var(--muted)}
  </style>
</head>

<body>
  <div class="wrap">
    <header class="header" id="top">
      <h1 class="title">Plan d’étude cantonal — Mathématiques</h1>
      <p class="subtitle">Collège de Genève — version “web” (travail en cours)</p>

      <!-- Boutons en clair (comme capture) -->
      <div class="pills" id="topPills"></div>
    </header>

    <div class="grid">
      <!-- Sommaire -->
      <aside class="card side">
        <h3>Sommaire</h3>
        <ul class="toc" id="toc"></ul>
        <p class="mini"><small>Astuce : les boutons en haut changent de vue, le sommaire t’amène directement à la section.</small></p>
      </aside>

      <!-- Contenu -->
      <main class="card main" id="content"></main>
    </div>
  </div>

<script>
/** =========================
 *  DONNÉES (à compléter)
 *  =========================
 *  Objectif : une structure “source de vérité” (JSON) + rendu dynamique.
 *  Tu peux enrichir : ajouter chapitres/années/items sans toucher au layout.
 */

/* Phase 1 / Étapes & Progression (extraits) */
const DATA = {
  meta: {
    title: "Plan d’étude cantonal — Mathématiques",
    org: "Collège de Genève",
    version: "web (travail en cours)"
  },

  nav: [
    { id:"phase1", label:"Phase 1" },
    { id:"etape1", label:"Étape 1" },
    { id:"competences", label:"Compétences clés" },
    { id:"progression", label:"Progression (1re → 4e)" },
    { id:"decoupages", label:"Découpages annuels" },
    { id:"acquisCO", label:"Acquis du CO" },
    { id:"phase2", label:"Phase 2 : IA & numérique" },
    { id:"phase3", label:"Phase 3 : transversalité" }
  ],

  phase1: {
    intro: "Étape 1 : Présentation de la discipline + Compétences clés. Étape 2 : Découpages annuels / progression / enchaînements des contenus.",
    cadre: [
      "Deux niveaux dès la 2e année.",
      "4h en DF pour MA1 et MA2 durant les 4 années.",
      "Pas de révision prévue sur les acquis du CO (ils sont traités séparément ici).",
      "Collaboration avec chimie / physique / informatique (ordre d’enseignement contraint)."
    ]
  },

  competencesCles: [
    { code:"C1", titre:"Raisonner de façon argumentée et rigoureuse" },
    { code:"C2", titre:"Maîtriser les savoir-faire techniques en mathématiques" },
    { code:"C3", titre:"Appréhender un problème avec les outils mathématiques" },
    { code:"C4", titre:"Communiquer (écrit/oral) via langage symbolique & graphique" },
    { code:"C5", titre:"Inscrire les maths dans l’histoire, liens & enjeux actuels" }
  ],

  progressionParAnnee: [
    {
      annee:"1re année",
      points:[
        "Calculer avec entiers, rationnels et réels.",
        "Résoudre équations/inéquations (1er, 2e degré + factorisation).",
        "Développer / réduire / factoriser.",
        "Représenter fonctions élémentaires (dont 1er et 2e degrés).",
        "Géométrie (angles, triangles, Pythagore, Thalès, cercles).",
        "Trigonométrie triangle rectangle."
      ]
    },
    {
      annee:"2e année",
      points:[
        "Géométrie cartésienne (droites, cercles).",
        "Trigonométrie triangle quelconque.",
        "Statistiques (moyenne, médiane, variance, écart-type).",
        "Équations et fonctions : polynomiales, rationnelles, exponentielles, logarithmiques, trigonométriques.",
        "Calcul vectoriel de base."
      ]
    },
    {
      annee:"3e année",
      points:[
        "Suites (terme général, somme arithm./géom.).",
        "Limites, dérivées, étude de fonctions, optimisation.",
        "Combinatoire.",
        "Probabilités discrètes (conditionnelle, binomiale).",
        "Produit scalaire, droites/plans (plan & espace)."
      ]
    },
    {
      annee:"4e année",
      points:[
        "Primitives, intégrales, problèmes via calcul intégral.",
        "Équations différentielles simples.",
        "Produit vectoriel & distances (plan/espace).",
        "Intervalles de confiance & tests statistiques.",
        "Probabilités continues (loi normale)."
      ]
    }
  ],

  /* Découpages annuels / “Vues disponibles”
     Exemple complet sur un chapitre (à étendre chapitres 2, 3, etc.) */
  decoupages: {
    annee: "Première année (niveau normal) — exemple",
    chapitres: [
      {
        id:"A1-CH1",
        titre:"Chapitre 1 : Calcul numérique et algébrique",
        items: [
          { titre:"Définir les ensembles de nombres (N, Z, Q → approche R), puissances entières et racines carrées", tags:["C2","CdB"] },
          { titre:"Connaître le vocabulaire et les notations du calcul numérique et de la théorie des ensembles (liste du minimum commun)", tags:["C3","CdB"] },
          { titre:"Calculer avec les nombres entiers et relatifs (priorités, parenthèses, signes, fractions)", tags:["C1","L"] },
          { titre:"Différencier nombres, constantes et variables", tags:["C2","CdB"] },
          { titre:"Lire et utiliser les notations algébriques (liste des notations communes)", tags:["C3"] },
          { titre:"Calculer avec les puissances entières et les racines carrées", tags:["C1","CdB"] },
          { titre:"Analyser la structure de termes algébriques", tags:["C3"] },
          { titre:"Effectuer des calculs algébriques : développer, réduire, factoriser", tags:["C2"] },
          { titre:"Construction mathématique : déf./conjecture/contre-exemple/démonstration/théorème/réciproque/contraposée + produire des conjectures simples", tags:["C2"] },
          { titre:"Démonstration : propriétés des puissances, racines, irrationalité de √2, identités remarquables", tags:["C2"] },
          { titre:"Éléments d’histoire des nombres et de l’algèbre (liste du minimum commun)", tags:["C4","L"] }
        ]
      }
    ]
  },

  acquisCO: [
    {
      bloc:"FA — Calcul littéral",
      items:[
        "Connaître le vocabulaire lié au calcul littéral",
        "Connaître et utiliser les conventions du calcul littéral",
        "Calculer avec monômes et polynômes",
        "Évaluer une expression littérale",
        "Transformer des formules simples (isoler une variable)",
        "Développer (identités remarquables, distributivité)",
        "Factoriser (mise en évidence, identités remarquables)",
        "Traduire programme de calcul ↔ expression littérale"
      ]
    },
    {
      bloc:"FA — Premier degré",
      items:[
        "Vocabulaire fonctions affines/linéaires/constantes",
        "Représenter une affine (pente & ordonnée à l’origine)",
        "Représenter une affine (2 points)",
        "Retrouver l’expression d’une affine depuis le graphe (pente fractionnaire)",
        "Parallélisme / perpendicularité",
        "Résoudre équation du 1er degré (coefficients fractionnaires)",
        "Traduire un problème en équation du 1er degré",
        "Image, préimage, intersections avec Ox/Oy"
      ]
    },
    {
      bloc:"NO — Calcul numérique",
      items:[
        "Calculer efficacement (4 opérations, priorités) sur entiers relatifs, décimaux, rationnels",
        "Comparer deux nombres",
        "Notation scientifique : définition + calculs",
        "Règles de calcul des puissances entières",
        "Racines carrées et cubiques + propriétés"
      ]
    },
    {
      bloc:"GM — Géométrie (Pythagore & figures)",
      items:[
        "Théorème de Pythagore (direct, réciproque, contraposée)",
        "Utiliser Pythagore pour longueur manquante / tester rectangle / dans l’espace",
        "Périmètres (figures simples, polygones par décomposition)",
        "Aires (figures simples, polygones par décomposition)",
        "Cercle : périmètre & aire, longueur d’arc, secteur"
      ]
    }
  ],

  phase2: {
    note: "Section indiquée comme à développer : Enjeux IA, place à donner à l’IA, ressources numériques."
  },
  phase3: {
    note: "Section indiquée comme à développer : ajout de transversalité."
  }
};

/** =========================
 *  RENDU UI
 *  ========================= */
const elPills = document.getElementById("topPills");
const elToc   = document.getElementById("toc");
const elMain  = document.getElementById("content");

let state = {
  viewId: "phase1",
  chapterFilter: new Set(["ALL"]),
  query: ""
};

function h(tag, attrs={}, children=[]){
  const e = document.createElement(tag);
  for (const [k,v] of Object.entries(attrs)){
    if (k === "class") e.className = v;
    else if (k === "html") e.innerHTML = v;
    else if (k.startsWith("on") && typeof v === "function") e.addEventListener(k.slice(2), v);
    else e.setAttribute(k, v);
  }
  for (const c of children){
    if (c === null || c === undefined) continue;
    e.appendChild(typeof c === "string" ? document.createTextNode(c) : c);
  }
  return e;
}

function scrollToId(id){
  const target = document.getElementById(id);
  if (!target) return;
  target.scrollIntoView({behavior:"smooth", block:"start"});
}

function renderPills(){
  elPills.innerHTML = "";
  DATA.nav.forEach(n=>{
    const btn = h("button", {
      class:"pill" + (state.viewId===n.id ? " active":""),
      type:"button",
      onclick: () => { state.viewId=n.id; renderAll(); scrollToId(n.id); }
    }, [n.label]);
    elPills.appendChild(btn);
  });
}

function renderToc(){
  elToc.innerHTML = "";
  DATA.nav.forEach(n=>{
    const li = h("li", {}, [
      h("a", {href:"#"+n.id, onclick:(ev)=>{ev.preventDefault(); state.viewId=n.id; renderAll(); scrollToId(n.id);} }, [n.label])
    ]);
    elToc.appendChild(li);
  });
}

function renderSectionPhase1(){
  const sec = h("section", {class:"section", id:"phase1"}, [
    h("div", {class:"sectionHead"}, [
      h("h2", {class:"sectionTitle"}, ["▼  Phase 1"]),
      h("div", {class:"muted"}, [""])
    ]),
    h("p", {class:"mini"}, [DATA.phase1.intro]),
    h("div", {class:"note"}, [
      h("div", {class:"muted"}, ["Cadre / intentions (extraits) :"]),
      h("ul", {class:"bullets"}, DATA.phase1.cadre.map(t=>h("li",{},[t])))
    ])
  ]);
  return sec;
}

function renderSectionEtape1(){
  return h("section", {class:"section", id:"etape1"}, [
    h("div", {class:"sectionHead"}, [
      h("h2", {class:"sectionTitle"}, ["▼  Étape 1 — Présentation"]),
      h("div", {class:"muted"}, [""])
    ]),
    h("details", {class:"accordion", open:true}, [
      h("summary", {}, ["Présentation de la discipline (Mathématiques)", h("span",{class:"muted"},["▲"])]),
      h("div", {class:"accBody"}, [
        h("p", {}, [
          "Ce bloc sert à poser l’intention (discipline, cohérence, preuve, modélisation, communication). ",
          h("span", {class:"muted"}, ["(Tu peux coller ici des paragraphes complets si besoin.)"])
        ])
      ])
    ])
  ]);
}

function renderSectionCompetences(){
  const sec = h("section", {class:"section", id:"competences"}, [
    h("div", {class:"sectionHead"}, [
      h("h2", {class:"sectionTitle"}, ["▼  Compétences clés"]),
      h("div", {class:"muted"}, [""])
    ]),
    h("div", {class:"items"}, DATA.competencesCles.map(c =>
      h("div", {class:"item"}, [
        h("div", {class:"itemTop"}, [
          h("p", {class:"itemTitle"}, [c.code + " — " + c.titre]),
          h("div", {class:"badges"}, [h("span",{class:"badge"},[c.code])])
        ])
      ])
    ))
  ]);
  return sec;
}

function renderSectionProgression(){
  const sec = h("section", {class:"section", id:"progression"}, [
    h("div", {class:"sectionHead"}, [
      h("h2", {class:"sectionTitle"}, ["▼  Progression (1re → 4e)"]),
      h("div", {class:"muted"}, [""])
    ]),
    h("p", {class:"mini"}, [
      "Vue synthèse par année (à enrichir)."
    ]),
    ...DATA.progressionParAnnee.map(a =>
      h("details", {class:"accordion", open:false}, [
        h("summary", {}, [a.annee, h("span",{class:"muted"},["▼"])]),
        h("div", {class:"accBody"}, [
          h("ul", {class:"bullets"}, a.points.map(x=>h("li",{},[x])))
        ])
      ])
    )
  ]);
  return sec;
}

function normalizeTags(tags){ return tags.map(t=>t.trim()); }

function itemMatchesFilters(item){
  const q = state.query.trim().toLowerCase();
  if (q && !item.titre.toLowerCase().includes(q)) return false;

  const active = [...state.chapterFilter];
  if (active.includes("ALL")) return true;

  const tags = normalizeTags(item.tags || []);
  // Si on choisit plusieurs chips, on accepte si l’item match au moins une des chips (OR).
  return active.some(f => tags.includes(f));
}

function renderSectionDecoupages(){
  const chapter = DATA.decoupages.chapitres[0];
  const allFilters = ["ALL","C1","C2","C3","C4","C5","CdB","L","T","N"];
  const sec = h("section", {class:"section", id:"decoupages"}, [
    h("div", {class:"sectionHead"}, [
      h("h2", {class:"sectionTitle"}, ["▼  Découpages annuels / Vues dynamiques"]),
      h("div", {class:"muted"}, [""])
    ]),
    h("p", {class:"mini"}, [
      DATA.decoupages.annee, " — ", h("span",{class:"k"},["exemple"]), " : filtrage par compétence / tags."
    ]),
    h("details", {class:"accordion", open:true}, [
      h("summary", {}, [chapter.titre, h("span",{class:"muted"},["▲"])]),
      h("div", {class:"accBody"}, [
        h("div", {class:"searchRow"}, [
          h("input", {
            type:"search",
            placeholder:"Rechercher dans le chapitre… (ex: “racines”, “démonstration”)",
            value: state.query,
            oninput:(ev)=>{ state.query = ev.target.value; renderAll(false); }
          }),
          h("span", {class:"muted"}, ["Astuce : clique sur C1/C2/… pour reproduire les “Vues disponibles”."])
        ]),
        h("div", {class:"chips"}, allFilters.map(f => {
          const active = state.chapterFilter.has(f);
          return h("button", {
            class:"chip" + (active ? " active":""),
            type:"button",
            onclick:()=>{
              if (f === "ALL"){
                state.chapterFilter = new Set(["ALL"]);
              } else {
                if (state.chapterFilter.has("ALL")) state.chapterFilter.delete("ALL");
                if (state.chapterFilter.has(f)) state.chapterFilter.delete(f);
                else state.chapterFilter.add(f);
                if (state.chapterFilter.size === 0) state.chapterFilter.add("ALL");
              }
              renderAll(false);
            }
          }, [f]);
        })),
        h("div", {class:"items", id:"chapterItems"})
      ])
    ])
  ]);

  return sec;
}

function renderChapterItems(){
  const holder = document.getElementById("chapterItems");
  if (!holder) return;
  holder.innerHTML = "";

  const chapter = DATA.decoupages.chapitres[0];
  const filtered = chapter.items.filter(itemMatchesFilters);

  holder.appendChild(
    h("p", {class:"mini"}, [
      "Résultats : ",
      h("strong", {}, [String(filtered.length)]),
      " / ",
      String(chapter.items.length),
      " — filtres actifs : ",
      h("span",{class:"k"}, [[...state.chapterFilter].join(", ")]),
      state.query.trim() ? (" — recherche : “" + state.query.trim() + "”") : ""
    ])
  );

  filtered.forEach(it=>{
    holder.appendChild(
      h("div", {class:"item"}, [
        h("div", {class:"itemTop"}, [
          h("p", {class:"itemTitle"}, [it.titre]),
          h("div", {class:"badges"}, (it.tags||[]).map(t=>h("span",{class:"badge"},[t])))
        ])
      ])
    );
  });

  if (filtered.length === 0){
    holder.appendChild(h("div",{class:"note"},[
      "Aucun item ne correspond à ces filtres/recherche. ",
      h("span",{class:"muted"},["(Essaie ALL ou enlève un filtre.)"])
    ]));
  }
}

function renderSectionAcquisCO(){
  return h("section", {class:"section", id:"acquisCO"}, [
    h("div", {class:"sectionHead"}, [
      h("h2", {class:"sectionTitle"}, ["▼  Acquis du CO (référence)"]),
      h("div", {class:"muted"}, [""])
    ]),
    h("p", {class:"mini"}, [
      "Cette vue regroupe les acquis du cycle d’orientation (utile comme “référentiel d’entrée”, séparé du PEc)."
    ]),
    ...DATA.acquisCO.map(b =>
      h("details", {class:"accordion", open:false}, [
        h("summary", {}, [b.bloc, h("span",{class:"muted"},["▼"])]),
        h("div", {class:"accBody"}, [
          h("ul", {class:"bullets"}, b.items.map(x=>h("li",{},[x])))
        ])
      ])
    )
  ]);
}

function renderSectionPhase2(){
  return h("section", {class:"section", id:"phase2"}, [
    h("div", {class:"sectionHead"}, [
      h("h2", {class:"sectionTitle"}, ["▼  Phase 2 : IA et numérique"]),
      h("div", {class:"muted"}, [""])
    ]),
    h("div", {class:"note"}, [DATA.phase2.note])
  ]);
}

function renderSectionPhase3(){
  return h("section", {class:"section", id:"phase3"}, [
    h("div", {class:"sectionHead"}, [
      h("h2", {class:"sectionTitle"}, ["▼  Phase 3 : transversalité"]),
      h("div", {class:"muted"}, [""])
    ]),
    h("div", {class:"note"}, [DATA.phase3.note])
  ]);
}

function renderAll(resetScroll=true){
  renderPills();
  renderToc();

  elMain.innerHTML = "";
  elMain.appendChild(renderSectionPhase1());
  elMain.appendChild(renderSectionEtape1());
  elMain.appendChild(renderSectionCompetences());
  elMain.appendChild(renderSectionProgression());
  elMain.appendChild(renderSectionDecoupages());
  elMain.appendChild(renderSectionAcquisCO());
  elMain.appendChild(renderSectionPhase2());
  elMain.appendChild(renderSectionPhase3());

  renderChapterItems();

  if (resetScroll) scrollToId(state.viewId);
}

renderAll();
</script>
</body>
</html>
